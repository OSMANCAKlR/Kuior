{% schema %}
{
  "name": "Product page",
  "settings": [],
  "presets": [
    {
      "name": "Product Page",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% stylesheet %}
        .productpage__wrapper--top {
          display: flex;
          justify-content: space-between;

        }

          .productpage__figure {
            width: 450px;
            height: 450px;
            padding: 0;
            margin: 0;
          }

          .productpage__img {
            height: 100%;
            width: 100%;
            object-fit: cover;
          }

          .productpage__price--container {
            width: 45%;
          }

          #product__page {
            margin-top: 45px;
          }

          .productpage__title {
            color: rgb(34, 32, 47);
            font-family: Glorify;
            font-size: 48px;
            font-style: normal;
            font-weight: 300;
            line-height: 98.5%;
            margin-bottom: 24px;
          }

          .productpage__buybuttons--container {
            margin-top: 14px;
          }

          #product__page .custombutton{
          display: flex;
          justify-content: center;
          align-content: center;
          color: white;
          text-align: center;
          font-family: Glorify;
          font-size: 15px;
          font-style: normal;
          font-weight: 700;
          line-height: 98.5%;
          background-color: #036638;
          border-radius: 4px;
          border: none;
          padding: 18px 0;
          cursor: pointer;
          width: 350px;
          }

          .tax__included{
            font-size: 10px;
            color: #036638;
          }

          .productpage__description--container {
            width: 40%;
          }

          .productpage__figure2 {
            width: 400px;
            height: 400px;
            padding: 0;
            margin: 0;
          }

          .productpage__figure2bundle {
            width: 100%;
            height: 220px;
            padding: 0;
            margin: 0;
          }

          .productpage__wrapper--bottom{
            margin-top: 68px;
            display: flex;
            justify-content: space-between;
           align-items: flex-start;
          }

        .custom-next-button, .custom-prev-button  {
            width: 55px;
            height: 55px;
            border-radius: 99px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            cursor: pointer;
          }

          .custom-prev-button {
              background-color: #F7F5E3;
            color: #036638;
          }

          .custom-next-button {
            background-color: #21B24F;
            color: white;
          }

        .product__page--description {
          margin-top: 24px;
        }

         #product__page h3 {
          color: var(--Kale, #036638);
          font-family: Open Sans;
          font-size: 44.87px;
          font-style: normal;
          font-weight: 300;
          line-height: 98.5%;
          margin-bottom: 4px;
           margin-top: 0px;
          }

        .swiper-container {
        width: 100%;
        max-width: 100%;
        max-height: 100vh;
        min-height: 0;
        min-width: 0;
      }

          #product__page p{
            margin-bottom: 2px;
            padding: 0;
            color: var(--Kale, #036638);
          font-family: Open Sans;
          }

          .bundle__img--container {
            width: 45%;
            min-width: 0;
            min-height: 0;
          }

          .bundleimg__title {
            color: var(--Kale, #036638);
          font-family: JeanLuc;
          font-size: 44.87px;
          font-style: normal;
          font-weight: 300;
          line-height: 98.5%;
          margin-bottom: 16px;
          margin-top: 0px;
          }

        .swiperbundle {
          width: 100%;
        }

    .product__variant--selector {
      flex-direction: column;
      gap: 14px;
    }

    .variant__img {
      width: 100%;
      height: 100%;
    }

      .variant__img--container {
        width: 50px;
        height: auto;
      }


      .product__variant  {
        width: auto;
        height: auto;
           border: 1px #bfd1ce solid;
        border-radius: 8px;
        padding: 10px;
        display: flex;
        gap: 30px;
        align-items: center;
      }
      .color-swatch.selected-product {
            border: 2px solid #a4a4a4;
      }

      .product__price--box {
        justify-content: flex-start;
            margin-top: 24px;
        margin-bottom: 24px;
      }

    .product__page--price {
      color: #22202f;
      font-weight: 600;
      font-family: 'Open Sans';
      font-size: 16px;
    }
        .mySwiperBundleMenu {
          margin-top: 14px;
        }

  .product__description--bottom {
       width: 100%;
    margin-top: 48px;
    gap: 94px;
    display: flex;
    flex-direction: column;
    }

    .product__description__wrapper {
      display: flex;
    justify-content: space-between;
    }

    .description__figure {
      width: 30%;
      height: auto;
    }

    .description_img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .product__description--text {
      width: 65%;
      display: flex;
      flex-direction: column;
    }

    .production__description--h2 {
      color: #22202f;
      font-family: Glorify;
      font-size: 34px;
      font-style: normal;
      font-weight: 300;
      line-height: 98.5%;
      margin-bottom: 24px;
      }

  .reverse {
    flex-direction: row-reverse;
  }

          @media screen and (max-width: 815px) {
            .productpage__wrapper--top {
              flex-direction: column;
              gap: 28px;
            }

            .productpage__wrapper--bottom {
              flex-direction: column;
            }

            .bundle__img--container {
             width: 100%;
            }

            .productpage__figure {
              width: 100%;
            }

            .productpage__figure2bundle {
              height: auto;
            }
            .productpage__price--container {
              width: 100%;
            }

            .productpage__title {
                max-width: none;
              font-size: 24px;
              }

            .productpage__figure2 {
                  display: none;
              }

                .productpage__description--container {
              width: 100%;
            }

             #product__page p{
              margin: 0;
               padding: 0;
            }

            .productpage__wrapper--bottom {
              margin-top: 48px;
              }
          }
{% endstylesheet %}

{% javascript %}
  var mySwiperBundleMenu = new Swiper(".mySwiperBundleMenu", {
     slidesPerView: 3,
       spaceBetween: 8,
        loop: true,
     autoplay: {
       delay: 5000, // 5 seconds
     }
   });


   document.addEventListener('DOMContentLoaded', function () {
    const colorSwatches = document.querySelectorAll('.color-swatch');
    const forms = document.querySelectorAll('.shopify-product-form');

    forms.forEach(function (form) {
      // Create a hidden input field for each form
      const hiddenVariantInput = document.createElement('input');
      hiddenVariantInput.type = 'hidden';
      hiddenVariantInput.name = 'id';
      form.appendChild(hiddenVariantInput);



      form.querySelectorAll('.color-swatch').forEach(function (swatch) {
        const productContainer = swatch.closest('.productpage__wrapper--top');
        const priceDisplay = productContainer.querySelector('.product__price');
        const originalDisplay = productContainer.querySelector('.product__price--compare');

        swatch.addEventListener('click', function () {
           const variantImageUrl = swatch.getAttribute('data-variant-image-url');
          const productImage = swatch.closest('.productpage__wrapper--top').querySelector('.productpage__img');
         if (productImage && variantImageUrl) {
    // Fade out effect
    productImage.style.opacity = '0';
    setTimeout(function() {
      // Change image source
      productImage.src = variantImageUrl;
      // Fade in effect
      productImage.style.opacity = '1';
    }, 250); // This timeout duration should match the CSS transition duration
  }
          const variantId = swatch.getAttribute('value');

          hiddenVariantInput.value = variantId; // Update the hidden input with the selected variant ID

          const newPrice = swatch.getAttribute('data-price');
          const originalPrice = swatch.getAttribute('original-price');

          if (newPrice) {
            priceDisplay.textContent =  newPrice;
          }

          if (originalPrice) {
            originalDisplay.textContent = originalPrice;
          }

          productContainer.querySelectorAll('.color-swatch').forEach((s) => s.classList.remove('selected-product'));
          swatch.classList.add('selected-product');
        });
      });

      // Set the first variant as the default selected for each product
      const firstSwatch = form.querySelector('.color-swatch');
      if (firstSwatch) {
        firstSwatch.click();
      }
    });
  });
{% endjavascript %}

<section id="product__page">
  <div class="page-width">
    <div class="productpage__wrapper--top">
      <figure class="productpage__figure">
        <img class="productpage__img" src="{{ product.featured_image | img_url: 'original' }}">
      </figure>
      <div class="productpage__price--container">
        <h1 class="productpage__title">{{ product.title }}</h1>
        <ajax-cart-product-form>
          {% form 'product', product, novalidate: 'novalidate' %}
            {% assign current_variant = product.selected_or_first_available_variant %}
            <div
              class="dropdown__menu"
              {% if product.variants.size == 1 and product.variants.first.title == 'Default Title' %}
                style="display: none;"
              {% endif %}
            >
              <div
                name="id"
                id="variant-dropdown-{{ product.id }}"
                class="variant__selector product__variant--selector"
              >
                {% for variant in product.variants %}
                  <div
                    class="color-swatch product__variant"
                    {% if variant.image %}
                      data-variant-image-url="{{ variant.image.src | img_url: 'master' }}"
                    {% else %}
                      data-variant-image-url="{{ product.featured_image | image_url }}"
                    {% endif %}

                    value="{{ variant.id }}"
                    original-price="{{ variant.compare_at_price | money }}"
                    data-price="{{ variant.price | money }}"
                    {% if variant == current_variant %}
                      selected="selected"
                    {% endif %}
                  >
                    {% if variant.image %}
                      <div class="variant__img--container">
                        <img class="variant__img" src="{{ variant.image.src | img_url: 'master' }}">
                      </div>
                    {% else %}
                      <div
                        class="variant__img--colour"
                        style="background-color: {{ variant.metafields.custom.variantcolour }};"
                      ></div>
                    {% endif %}
                    <span>{{ variant.title }}</span>
                  </div>
                {% endfor %}
              </div>
            </div>
            {% if product.variants.size <= 1 %}
              <div class="product__page--description">
                {{ product.metafields.custom.maindescription | metafield_tag }}
              </div>
            {% endif %}
            <div class="box__bottom--price product__price--box">
              <div class="box__price--container">
                {% if product.compare_at_price != null %}
                  <span class="product__price product__price--sale">
                    {{- product.price | money }}
                  </span>
                  <span class="product__price--compare product__price--original">
                    {{- product.compare_at_price | money }}
                  </span>
                {% else %}
                  <span class="product__price product__page--price"></span>
                {% endif %}
              </div>
              <div class="error__container" data-ajax-cart-errors="form"></div>
            </div>
            <input style="display: none;" type="number" name="quantity" value="1" min="1">
            <button
              class="buy__button {% if current_variant.inventory_quantity == 0 %}out-of-stock{% endif %}"
              type="submit"
              name="add"
              {% if current_variant.inventory_quantity <= 0 %}
                disabled
              {% endif %}
            >
              {% if current_variant.inventory_quantity > 0 %}
                Add to Basket
              {% else %}
                Out of Stock
              {% endif %}
            </button>
          {% endform %}
        </ajax-cart-product-form>
        {% if product.variants.size > 1 %}
          <div class="product__page--description">
            {{ product.metafields.custom.maindescription | metafield_tag }}
          </div>
        {% endif %}
      </div>
    </div>
    <div class="product__description--bottom">
      <div class="product__description__wrapper">
        <figure class="description__figure">
          <img
            class="description_img"
            src="https://cdn.shopify.com/s/files/1/0550/8261/4884/files/Sa3c198986f1c464083c0717db62480c2b.webp?v=1701044613"
          >
        </figure>
        <div class="product__description--text">
          <h2 class="production__description--h2">Protect Your Most Valuable Asset</h2>
          <p class="product__description--p">
            Aging and sun exposure can create unwanted effects on our skin – from wrinkles and pigmentation to redness
            and uneven texture. Advanced light therapy by Omnilux allows you to treat the visible signs of aging and
            damaged skin with professional grade technology right from home.
          </p>
          <ul>
            <li>Stimulate collagen production for firmer, more youthful-looking skin</li>
            <li>Refine skin texture and tone for an effortless glow</li>
            <li>A non-invasive and natural option</li>
            <li>Maintain and improve in-clinic treatments</li>
          </ul>
        </div>
      </div>
      <div class="product__description__wrapper reverse">
        <figure class="description__figure">
          <img
            class="description_img"
            src="https://cdn.shopify.com/s/files/1/0550/8261/4884/files/S3392c8f9bff94832bad9d51e5f348878G.webp?v=1701044613"
          >
        </figure>
        <div class="product__description--text">
          <h2 class="production__description--h2"> Instructions </h2>
        <strong>We recommend three to five 10-minute treatments per week for four to six weeks, followed by maintenance as desired.</strong>
          <ol>
            <li>Charge your controller & then connect it to the device</li>
            <li>Prepare your skin</li>
            <li>Secure the device to your head using the velcro straps</li>
            <li>Start the 10-minute treatment</li>
            <li>Remove the mask and apply moisturizer to the skin</li>
            <li>Gently wipe down the mask</li>
          </ol>
          <strong>Setting Information</strong>
          <ul>
            <li>
              <strong>Red light:</strong> 630nm-anti-aging,promote collagen,
tighteness, increase elasticity;
            </li>
            <li>
              <strong> The first light is displayed, and the operation screen displays R.</strong>
            </li>
            <li>
              <strong> Blue light: </strong>460nm-kill 
bacteria, acne bacteria, reduce inflammation and scar, increase skin oxygen;
            </li>
            <li>
              <strong> The second light is displayed, and the operation screen displays B. </strong>
            </li>
            <li>
              <strong>Yellow light: </strong> 590nm-balance skin texture,stimulate red
blood cells to reduce redness and fine lines.
            </li>
            <li>
              <strong>The third light is displayed, and the operation screen displays Y. </strong>
            </li>
            <li>
              <strong>Near-Infrared light: </strong> 850nm-repair the skin, improve blood
circulation, increase skin moisture
            </li>
            <li>
              <strong>The operation screen displays Y and NiR, which are invisible to the naked eye and can be used together with other light</strong>
            </li>
          </ul>
        </div>
      </div>
      <div class="product__description__wrapper ">
        <figure class="description__figure">
          <img
            class="description_img"
            src="https://cdn.shopify.com/s/files/1/0550/8261/4884/files/S99218c0c0545479aa0ce003ddf980723R.webp?v=1701044613"
          >
        </figure>
        <div class="product__description--text">
          <h2 class="production__description--h2"> Specifications </h2>
           <strong>LED TYPE</strong>
          <ul>
            <li>
              Red and near-infrared, Blue & Yellow light settings
            </li>
          </ul>
           <strong>WAVELENGTHS</strong>
          <ul>
            <li>
             630nm (red) - Enhance elasticity & resist fine lines
            </li>
            <li>
             850nm (near-infrared) -Repair skin & promote blood circulation
            </li>
            <li>
             Blue Light: 460nm -Sensitive repair - balance grease & oil levels in the skin
            </li>
            <li>
             Yellow Light: 590nm - Brighten skin and improve dark circle & skin
            </li>
          </ul>
           <strong>NUMBER OF LEDS</strong>
          <ul>
            <li>
          240 LED Lamp Beads (2per Bulb)
            </li>
            <li>
             66 LED bulbs
            </li>
          </ul>
           <strong>Where should you use this device?</strong>
          <ul>
            <li>
         Face
            </li>
          </ul>
           <strong>NUMBER OF LEDS</strong>
          <ul>
            <li>
          240 LED Lamp Beads (2per Bulb)
            </li>
            <li>
             66 LED bulbs
            </li>
          </ul>
           <strong>Where should you use this device?</strong>
          <ul>
            <li>
         Face
            </li>
          </ul>
           <strong>CERTIFICATIONS</strong>
          <ul>
            <li>
        FDA, CE, TGA
            </li>
          </ul>
           <strong>WARRANTY</strong>
          <ul>
            <li>
      2 years: device
            </li>
            <li>
     1 year: controller
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var addToCartButtons = document.querySelectorAll('.buy__button');

    addToCartButtons.forEach(function (button) {
      button.addEventListener('click', function () {
        // Add a class to indicate processing
        button.classList.add('processing');
        button.textContent = 'Adding...';

        // Simulate an AJAX call with setTimeout
        setTimeout(function () {
          // Change the text to 'Added!' once the AJAX call is complete
          button.textContent = 'Added!';
          button.classList.remove('processing');
          button.classList.add('added');
          // Change the text back to 'Add to order' after some time
          setTimeout(function () {
            button.textContent = 'Add to order';
            button.classList.remove('added');
          }, 2000);
        }, 1000);
      });
    });
  });
</script>

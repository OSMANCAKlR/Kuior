{% schema %}
{
  "name": "Product page",
  "settings": [

  ],
  "presets": [
    {
      "name": "Product Page"
    }
  ]
}
{% endschema %}

{% stylesheet %}
    .productpage__wrapper--top {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

      .productpage__figure {
        width: 45%;
        padding: 0;
        margin: 0;
      }

      .productpage__img {
        height: 100%;
        width: 100%;
        object-fit: cover;
      }

      .productpage__price--container {
        width: 45%;
      }

      #product__page {
        margin-top: 45px;
      }

      .productpage__title {
        color: rgb(34, 32, 47);
        font-family: Glorify;
        font-size: 48px;
        font-style: normal;
        font-weight: 300;
        line-height: 98.5%;
        margin-bottom: 4px;
        max-width: 400px;
      }

      .productpage__buybuttons--container {
        margin-top: 14px;
      }

      #product__page .custombutton{
      display: flex;
      justify-content: center;
      align-content: center;
      color: white;
      text-align: center;
      font-family: Glorify;
      font-size: 15px;
      font-style: normal;
      font-weight: 700;
      line-height: 98.5%;
      background-color: #036638;
      border-radius: 4px;
      border: none;
      padding: 18px 0;
      cursor: pointer;
      width: 350px;
      }

      .tax__included{
        font-size: 10px;
        color: #036638;
      }

      .productpage__description--container {
        width: 40%;
      }

      .productpage__figure2 {
        width: 45%;
        height: auto;
        padding: 0;
        margin: 0;
      }

      .productpage__figure2bundle {
        width: 100%;
        height: 220px;
        padding: 0;
        margin: 0;
      }

      .productpage__wrapper--bottom{
        margin-top: 68px;
        display: flex;
        justify-content: space-between;
       align-items: flex-start;
      }

    .custom-next-button, .custom-prev-button  {
        width: 55px;
        height: 55px;
        border-radius: 99px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 18px;
        cursor: pointer;
      }

      .custom-prev-button {
          background-color: #F7F5E3;
        color: #036638;
      }

      .custom-next-button {
        background-color: #21B24F;
        color: white;
      }

    .box__menu--wrapper {
    margin-bottom: 60px;
  }

  .boxmenu__title {
    color: #242424;
    text-align: center;
    font-family: Inter;
    font-size: 52px;
    font-style: normal;
    font-weight: 600;
    line-height: 65.319px; /* 125.613% */
    letter-spacing: -1.04px;
  }

  .last__word {
    color: #d4af37;
  }

  .last__word {
    position: relative;
  }

  .title__line {
    position: absolute;
    left: 50%;
    transform: translate(40%);
    margin-top: 10px;
  }

  .boxmenu__container {
    display: flex;
    justify-content: space-between;
    margin-top: 42px;
  }

  .box {
    display: flex;
    flex-direction: column;
  }

  .box__img--figure {
    height: 300px;
    width: 100%;
    display: flex;
    position: relative;
    padding: 18.86px;
    border-radius: 5.546px;
    background: #f3eee9;
  }

  .box__img {
    height: 100%;
    width: 100%;
    border-radius: 5.546px;
    object-fit: cover;
     transition: opacity 0.250s ease; /* Transition effect */
  opacity: 0; /* Initial opacity set to 0 */
  }

  .box__bottom {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin-top: 13.68px;
    position: relative;
  }

  .product__title {
    color: var(--Text, #242424);
    text-align: center;
    font-family: Open Sans;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
    margin-bottom: 13.5px;
  }



  .product__price {
    color: var(--Text, #242424);
    text-align: center;
    font-family: Open Sans;
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
  }

  .box__bottom--price {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-bottom: 12px;
  }

  .dropdown__option {
    font-family: Inter;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  .carousel-container {
    position: relative;
    margin: 58px auto 0;
  }
  .carousel-slide {
    display: flex;
    overflow: hidden;
    transition: transform 0.3s ease-in-out; /* Add a transition for smooth sliding */
    justify-content: space-evenly;
  }
  .carousel-box {
    width: 100%;
    text-align: center;
    box-sizing: border-box;
  }
  .carousel-arrows {
    display: flex;
    justify-content: space-between;
    margin-top: 34px;
  }
  .carousel-dots {
    display: flex;
    justify-content: center;
  }
  .dot {
    width: 10px;
    height: 10px;
    background-color: rgba(0, 86, 55, 0.4);
    border-radius: 50%;
    margin: 0 5px;
    cursor: pointer;
  }

  .dot.active {
    background-color: #005637;
  }

  .row {
    width: 100%;
    max-width: 1090px;
    margin: 0 auto;
    align-items: center;
    transition: transform 0.3s ease-in-out;
  }

  .menubutton {
    border-radius: 20px;
    background: var(--Primary-1, #d4af37);
    display: flex;
    width: 318px;
    height: 68px;
    padding: 16.281px 54.783px;
    justify-content: center;
    align-items: center;
    color: var(--Primary-2, #005637);
    font-family: Inter;
    font-size: 20px;
    font-style: normal;
    font-weight: 500;
    line-height: 24.85px; /* 124.251% */
    text-decoration: none;
  }

  .menubutton__container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 14px;
  }

  .arrowsbutton {
    cursor: pointer;
  }

  .container {
    padding: 26px;
  }

  .box__price--container {
    display: flex;
    gap: 7px;
  }

  .product__price--original {
    color: var(--Sunrise, #f26820);
    text-align: center;
    font-family: Open Sans;
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
    text-decoration: line-through;
  }

  .product__price--sale {
    color: var(--Text, #242424);
    text-align: center;
    font-family: Open Sans;
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
  }

  .carousel-button {
    padding-right: 40px;
  }

  .rightbutton {
    padding-right: 0px;
    padding-left: 40px;
  }

  .mainproduct__img--a {
    cursor: pointer;
  }

  .product__tag {
    position: absolute;
    bottom: 0;
    display: flex;
    padding: 1.946px 11.675px;
    justify-content: center;
    align-items: center;
    border-radius: 0px 14.594px 0px 0px;
    border: 6.5px solid #fff;
    color: #fff;
    text-align: center;
    font-family: Inter;
    font-size: 12px;
    font-style: normal;
    font-weight: 700;
    line-height: 16.18px; /* 134.832% */
    text-transform: uppercase;
    left: 2px;
  }

  .menubox__title {
    margin-bottom: 34px;
  }

  .swiper-pagination-bullet {
    background: #005637 !important; /* Replace 'your-color' with your desired color */
    opacity: 0.7; /* You can adjust the opacity if needed */
  }
  /* Change the active (current) pagination bullet color */
  .swiper-pagination-bullet-active {
    background: #005637 !important; /* Replace 'your-active-color' with your desired color for the active bullet */
  }

  .navigation__arrows--container {
    display: flex;
    justify-content: space-between;
    flex-direction: row-reverse;
    margin-top: 34px;
    align-items: center;
    padding: 0px 24px;
  }

  .buy__button {
    display: flex;
    width: 100%;
    padding: 15.815px 29.37px;
    justify-content: center;
    align-items: center;
    gap: 45.184px;
    border-radius: 5.648px;
    background: #5b6240;
    color: var(--Cream, #f3eee9);
    font-family: Glorify;
    font-size: 16px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    text-transform: uppercase;
    cursor: pointer;
    border: none;
  }

  .error__container {
    background-color: white;
    z-index: 4;
    position: fixed;
    width: 100%;
    transform: translateY(70px);
    max-width: 350px;
  }

  .out-of-stock {
    background: #e9eaeb;
    color: #69cba8;
    cursor: not-allowed;
  }

  .productcarousel__title {
    color: var(--Text, #242424);
    font-family: Glorify;
    font-size: 30px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    margin-bottom: 9px;
  }

  .productcarousel__span {
    color: var(--Text, #242424);
    font-family: Open Sans;
    font-size: 12px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
  }

  .color-swatch {
    width: 25px;
    height: 25px;
    border: 1px solid #000;
    cursor: pointer;
    border-radius: 50px;
  }

  .box__bottom--container {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .color-swatch.selected {
    border: 2px solid #000; /* Example style for selected swatch */
  }

  .variant__selector {
    display: flex;
    gap: 2.85px;
    justify-content: center;
    margin-bottom: 6.87px;
  }

  .buy__buttonscontainerCarousel {
    position: absolute;
    bottom: 0;
    width: 100%;
  }
  @media screen and (max-width: 1050px) {
    #boxmenu__wrapper {
      margin-top: 28px;
      margin-bottom: 20px;
    }
  }

  @media screen and (max-width: 550px) {
    .box__img--figure {
      height: 200px;
    }

    .product__title {
      color: var(--Text, #242424);
      text-align: center;
      font-family: Open Sans;
      font-size: 12px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
    }

    .buy__button {
      padding: 18px 10px;
      color: var(--Cream, #f3eee9);
      font-family: Glorify;
      font-size: 10px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
      text-transform: uppercase;
    }

    #boxmenu__wrapper {
      margin-top: 28px;
      margin-bottom: 20px;
    }
  }

     #product__page h3 {
      color: var(--Kale, #036638);
      font-family: Open Sans;
      font-size: 44.87px;
      font-style: normal;
      font-weight: 300;
      line-height: 98.5%;
      margin-bottom: 4px;
       margin-top: 0px;
      }

    .swiper-container {
    width: 100%;
    max-width: 100%;
    max-height: 100vh;
    min-height: 0;
    min-width: 0;
  }

      #product__page p{
        margin-bottom: 2px;
        padding: 0;
        color: var(--Kale, #036638);
      font-family: Open Sans;
      }

      .bundle__img--container {
        width: 45%;
        min-width: 0;
        min-height: 0;
      }

      .bundleimg__title {
        color: var(--Kale, #036638);
      font-family: JeanLuc;
      font-size: 44.87px;
      font-style: normal;
      font-weight: 300;
      line-height: 98.5%;
      margin-bottom: 16px;
      margin-top: 0px;
      }

    .swiperbundle {
      width: 100%;
    }



    .mySwiperBundleMenu {
      margin-top: 14px;
    }

      @media screen and (max-width: 815px) {
        .productpage__wrapper--top {
          flex-direction: column;
        }

        .productpage__wrapper--bottom {
          flex-direction: column;
        }

        .bundle__img--container {
         width: 100%;
        }

        .productpage__figure {
          width: 100%;
        }

        .productpage__figure2bundle {
          height: auto;
        }
        .productpage__price--container {
          width: 100%;
        }

        .productpage__title {
            max-width: none;
          }

        .productpage__figure2 {
              display: none;
          }

            .productpage__description--container {
          width: 100%;
        }

         #product__page p{
          margin: 0;
           padding: 0;
        }

        .productpage__wrapper--bottom {
          margin-top: 48px;
          }
      }
{% endstylesheet %}

{% javascript %}
  var mySwiperBundleMenu = new Swiper(".mySwiperBundleMenu", {
     slidesPerView: 3,
       spaceBetween: 8,
        loop: true,
     autoplay: {
       delay: 5000, // 5 seconds
     }
   });


   document.addEventListener('DOMContentLoaded', function () {
    const colorSwatches = document.querySelectorAll('.color-swatch');
    const forms = document.querySelectorAll('.shopify-product-form');

    forms.forEach(function (form) {
      // Create a hidden input field for each form
      const hiddenVariantInput = document.createElement('input');
      hiddenVariantInput.type = 'hidden';
      hiddenVariantInput.name = 'id';
      form.appendChild(hiddenVariantInput);

      form.querySelectorAll('.color-swatch').forEach(function (swatch) {
        const productContainer = swatch.closest('.carousel-box');
        const priceDisplay = productContainer.querySelector('.product__price');
        const originalDisplay = productContainer.querySelector('.product__price--compare');

        swatch.addEventListener('click', function () {
           const variantImageUrl = swatch.getAttribute('data-variant-image-url');
          const productImage = swatch.closest('.carousel-box').querySelector('.box__img');
         if (productImage && variantImageUrl) {
    // Fade out effect
    productImage.style.opacity = '0';
    setTimeout(function() {
      // Change image source
      productImage.src = variantImageUrl;
      // Fade in effect
      productImage.style.opacity = '1';
    }, 250); // This timeout duration should match the CSS transition duration
  }
          const variantId = swatch.getAttribute('value');

          hiddenVariantInput.value = variantId; // Update the hidden input with the selected variant ID

          const newPrice = swatch.getAttribute('data-price');
          const originalPrice = swatch.getAttribute('original-price');

          if (newPrice) {
            priceDisplay.textContent = 'from ' + newPrice;
          }

          if (originalPrice) {
            originalDisplay.textContent = originalPrice;
          }

          productContainer.querySelectorAll('.color-swatch').forEach((s) => s.classList.remove('selected'));
          swatch.classList.add('selected');
        });
      });

      // Set the first variant as the default selected for each product
      const firstSwatch = form.querySelector('.color-swatch');
      if (firstSwatch) {
        firstSwatch.click();
      }
    });
  });
{% endjavascript %}

<section id="product__page">
  <div class="page-width">
    <div class="productpage__wrapper--top">
      <figure class="productpage__figure">
        <img class="productpage__img" src="{{ product.featured_image | img_url: 'original' }}">
      </figure>
      <div class="productpage__price--container">
        <h1 class="productpage__title">{{ product.title }}</h1>
        <ajax-cart-product-form>
          {% form 'product', product, novalidate: 'novalidate' %}
            {% assign current_variant = product.selected_or_first_available_variant %}
            <div
              class="dropdown__menu"
              {% if product.variants.size == 1
                and product.variants.first.title == 'Default Title'
              %}
                style="display: none;"
              {% endif %}
            >
              <div name="id" id="variant-dropdown-{{ product.id }}" class="variant__selector">
                {% for variant in product.variants %}
                  <div
                    class="color-swatch"
                    {% if variant.image %}
                      style="background-image: url('{{ variant.image.src | img_url: 'master' }}'); background-size: cover;"
                    {% else %}
                      style="background-color: {{ variant.metafields.custom.variantcolour }};"
                    {% endif %}
                    {% if variant.image %}
                      data-variant-image-url="{{ variant.image.src | img_url: 'master' }}"
                    {% else %}
                      data-variant-image-url="{{ product.featured_image | image_url }}"
                    {% endif %}

                    value="{{ variant.id }}"
                    original-price="{{ variant.compare_at_price | money }}"
                    data-price="{{ variant.price | money }}"
                    {% if variant == current_variant %}
                      selected="selected"
                    {% endif %}
                  ></div>
                {% endfor %}
              </div>
            </div>
            <div class="box__bottom--price">
              <div class="box__price--container">
                {% if product.compare_at_price != null %}
                  <span class="product__price product__price--sale">
                    {{- product.price | money }}
                  </span>
                  <span class="product__price--compare product__price--original">
                    {{- product.compare_at_price | money }}
                  </span>
                {% else %}
                  <span class="product__price"></span>
                {% endif %}
              </div>
              <div class="error__container" data-ajax-cart-errors="form"></div>
            </div>
            <input style="display: none;" type="number" name="quantity" value="1" min="1">
            <button
              class="buy__button {% if current_variant.inventory_quantity == 0 %}out-of-stock{% endif %}"
              type="submit"
              name="add"
              {% if current_variant.inventory_quantity <= 0 %}
                disabled
              {% endif %}
            >
              {% if current_variant.inventory_quantity > 0 %}
                Add to Basket
              {% else %}
                Out of Stock
              {% endif %}
            </button>
          {% endform %}
        </ajax-cart-product-form>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var addToCartButtons = document.querySelectorAll('.buy__button');

    addToCartButtons.forEach(function (button) {
      button.addEventListener('click', function () {
        // Add a class to indicate processing
        button.classList.add('processing');
        button.textContent = 'Adding...';

        // Simulate an AJAX call with setTimeout
        setTimeout(function () {
          // Change the text to 'Added!' once the AJAX call is complete
          button.textContent = 'Added!';
          button.classList.remove('processing');
          button.classList.add('added');
          // Change the text back to 'Add to order' after some time
          setTimeout(function () {
            button.textContent = 'Add to order';
            button.classList.remove('added');
          }, 2000);
        }, 1000);
      });
    });
  });
</script>

<script>
  $(document).ready(function() {
    // Variable to store the maximum height
    var maxheight = 0;

    // Iterate over each element with the class .box__bottom--container
    $('.box__bottom').each(function() {
      // Update maxheight with the height of the current element if it's larger
      maxheight = Math.max(maxheight, $(this).height());
    });

    // Set the height of all .box__bottom--container elements to maxheight
  $('.box__bottom').height(maxheight + 30);
  });
</script>
